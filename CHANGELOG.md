# Nodecaf Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [v0.8.1] - 2020-02-13

### Added
- app attribute exposing server port number
- app attribute to toggle conf live reload instead of relying on debug mode

### Changed
- hange global error handler to log errors properly instead of just dumping
- uncaught errors ungly dump to proper log entry
- SIGTER and SIGINT handling to rely on NODE_ENV instead of debug mode

### Removed
- startup and terminate raw console messages in favor of server log entries
- debug mode setting

## [v0.8.0] - 2020-02-11

### Added
- interface for logging to stdout as per 12 factor app
- automatic log entry to all http responses sent by the server

### Fixed
- unhandled exception for 'undefined' or 'null' route handlers
- intentional 500 responses being logged as uncaught route errors

### Changed
- default service name hoping to force authors into changing it

### Removed
- file/stream logging api in favor of stdout logging only

### Security
- fixed vulnerability on express-fileupload dependency by upgrading it

## [v0.7.10] - 2019-10-16

### Added
- conf argument to 'restart' method for updating the settings
- 'running' property to check whether the server is listening
- conf as an arg object key to API callback

### Fixed
- log entry for uncaught errors to use the original error stack and name
- config layering for null values to not throw errors anymore

### Removed
- config data form server start, stop and restart log entries

## [v0.7.9] - 2019-09-26

### Changed
- the logging system to use [golog](https://gitlab.com/GCSBOSS/golog) instead of bunyan

### Removed
- `version` and `hosname` properties from log entries

### Fixed
- configuration layering to properly merge objects

## [v0.7.8] - 2019-09-06

### Added
- express cookie parser enabled by default
- app option to hold a secret for signing cookies
- request headers to handler args
- logging function and conf object to start and stop handlers arguments

### Changed
- ssl key and cert files to be read on every setup
- server start log entry to only include conf data when in debug mode

## [v0.7.7] - 2019-07-30

### Added
- setting to rebuild the API on every start or setup
- log entries for server start, stop and restart event
- live application reload for conf file changes in debug mode
- support for JSON conf files

### Changed
- status when API was not setup from 'Not Found' to 'Service Unavailable'
- conf file logic to use [Confort](https://www.npmjs.com/package/confort) module

### Removed
- all CLI functionality to [own project](https://gitlab.com/GCSBOSS/nodecaf-cli)
- conf type parameter in favor of reading the extension of path

## [v0.7.6] - 2019-07-24

### Added
- setting to permissively allow CORS on all routes

## [v0.7.5] - 2019-07-23

### Added
- setting for a path where to store files uploaded as `multipart/form-data`
- app version to startup message when running through binary

## [v0.7.4] - 2019-07-22

### Added
- option to disable all request body parsing

### Removed
- ability to set up app name and version through config files

## [v0.7.3] - 2019-07-16

### Changed
- minor details in cli outputs due to internal library changes (eclipt, ejs)

### Removed
- deprecated `conf` param from the `main.js` generated by `nodecaf init`
- `-o, --outfile` option of `nodecaf openapi` in favor of a positional argument

## [v0.7.2] - 2019-07-09

### Fixed
- bug when filtering requests with charset on content-type

## [v0.7.1] - 2019-07-08

### Added
- a function to apply config files on top of each other

### Fixed
- type filtering to not require content-type from requests without body

### Changed
- parser to ignore request body when no content-length is present

### Removed
- the settings argument that used to be passed to user init function

## [v0.7.0] - 2019-07-07

### Added
- support for YAML config files
- app method to filter requests by body content-type app-wide
- top-level function to define per-route content-type filtering rules
- default generic request body description to open api doc operations
- accepted mime-types to operation request body api doc
- global CLI help command to list available commands and usage
- CLI command to output version of the globally installed Nodecaf
- `--no-optional` flag to install command output by `nodecaf init`

### Fixed
- CLI error: unknown type "as-is" on cli options
- CLI init error when lib or bin directory already exists

### Changed
- error messages to not be JSON by default

## [v0.6.0] - 2019-06-24

### Added
- parameters for project name and directory to cli init command
- version setting to app class
- functions to describe/document your api
- cli command to generate Open API compatible documentation (`nodecat openapi`)
- HTTPS support through setting
- error log entry for uncaught route errors
- log entry for uncaught errors that crash the server process
- complete functionality documentation to readme

### Fixed
- the cli commands to not share the same parameters
- deprecation warning because of old Express `del` command
- route not found error output as HTML
- log level setting (now it works)
- handling of rejected promises to output a clean message

### Changed
- `route`method was renamed to `api`
- cli init to henerate routing in a seperate api.js file
- error handling interface and use express built-in functionality

## [v0.5.3] - 2019-06-13

### Added
- missing default message for REST errors thrown from assertions

### Fixed
- code generation error standard

### Changed
- code generation to use spaces instead of tabs

## [v0.5.2] - 2019-06-12

### Added
- missing default message for REST errors thrown as strings
- missing options for conf file generation with cli init

### Fixed
- user error handler not being executed when headers were already sent
- undefined server name being shown when terminating from command line

## [v0.5.1] - 2019-06-11

### Added
- log warning when an error happens after the response haders have been sent

### Changed
- Logger now serializes 'req' key as a node request object

### Fixed
- Fixed undefined app name field being shown when running from command line
- Fixed undefined error on subsequent close calls

## [v0.5.0] - 2019-06-10

- **Renamed project to Nodecaf**

### Added
- path field to request log entry

### Changed
- Moved from Restify to Express for the internal route server
- conf file generation to create parent directories if needed

### Fixed
- Fixed server to correctly await start and close events

## [v0.4.1] - 2019-06-02

### Added
- setting to log all incoming requests
- logging capabilities through bunyan package

## [v0.4.0] - 2019-06-01

### Added
- capability for assertion module to be used on async callbacks
- cli command to generate the basic file structure for nodecaf projects

### Changed
- terminal signal and uncaught exception handling
- error handling code for better interface consistency

## [v0.3.0] - 2019-05-29

### Fixed
- conf loader to not output warning when no conf path is provided
- exception when route errors would trigger an error event without listeners
- default error handler that would attach itself again on every request

## [v0.2.0] - 2019-05-27

### Added
- an Assertions module to handle common REST exception scenarios.

### Changed
- error handling to always produce a valid REST output.

## [v0.1.0] - 2019-05-17
- First officially published version.

[v0.1.0]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.1.0
[v0.2.0]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.2.0
[v0.3.0]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.3.0
[v0.4.0]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.4.0
[v0.4.1]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.4.1
[v0.5.0]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.5.0
[v0.5.1]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.5.1
[v0.5.2]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.5.2
[v0.5.3]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.5.3
[v0.6.0]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.6.0
[v0.7.0]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.7.0
[v0.7.1]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.7.1
[v0.7.2]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.7.2
[v0.7.3]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.7.3
[v0.7.4]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.7.4
[v0.7.5]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.7.5
[v0.7.6]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.7.6
[v0.7.7]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.7.7
[v0.7.8]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.7.8
[v0.7.9]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.7.9
[v0.7.10]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.7.10
[v0.8.0]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.8.0
[v0.8.1]: https://gitlab.com/GCSBOSS/nodecaf/-/tags/v0.8.1
